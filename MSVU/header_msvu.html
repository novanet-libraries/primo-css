
<div id="logo">
  <a href="http://www.msvu.ca/en/home/library/default.aspx" title="MSVU library home page">
    <img src="../uploaded_files/MSVU/header-logo.gif" alt="MSVU logo"/>
  </a>
</div>

<div id="header-links">
  <a href="http://libguides.msvu.ca/DocDel/" target="popup" onclick="openWindow(this.href, this.target, 'top=100,left=50,width=600,height=500,resizable=1,scrollbars=1'); return false;">Document Delivery</a>
  |  
  <a href="http://sfxna12.hosted.exlibrisgroup.com/01nova_msvu/az" target="popup" onclick="openWindow(this.href, this.target, 'top=100,left=50,width=600,height=500,resizable=1,scrollbars=1'); return false;">Journal Titles A-Z</a>
  |
  <a href="http://libguides.msvu.ca/" target="popup" onclick="openWindow(this.href, this.target, 'top=100,left=50,width=600,height=500,resizable=1,scrollbars=1'); return false;">Guides A-Z</a>
  | 
  <a title="Get help using this portal" target="popup" href="helpHandler.do?helpId=search" class="EXLMainMenuITEMHelp" target="popup" onclick="openWindow(this.href, this.target, 'top=100,left=50,width=600,height=500,resizable=1,scrollbars=1'); return false;">Help</a>
</div>

<div id="novanet-sign-in" style="display:none">
	<h1>^</h1>
	<p>You should sign in!</p>
	<span>(<a class='toggle-why' href="#">why?</a>)</span>
</div>
<div id="novanet-why-sign-in" style="display:none">
  <a class="toggle-why" href="#">&times;</a>
  <ul>
    <li>Reason 1</li>
    <li>Reason 2</li>
    <li>Reason 3</li>
  </ul>
</div>
<script type="text/javascript">
  $(document).ready(function(){
    var $userTile = $('#exlidUserAreaTile'),
        $userName = $('#exlidUserName'),
        $userAcct = $('#exlidMyAccount').hide(),
        issignedin = $('#exlidSignOut').is(':visible');
           
    $userName.find('.EXLUserAreaStart').hide();
    var $nameSpan = $userName.find('.EXLUserNameDisplay');
    //do this next 'if' with a code table change, not with the script.
    if ($nameSpan.html().replace(/\s*/g, '') == 'Guest'){
      $nameSpan.html('Guest Session');
    }
    $nameSpan.wrap(
      $('<a>').attr('href', $userAcct.find('a').attr('href'))
    );
    $userTile.show();    

    if (!issignedin){
      $('#novanet-sign-in').show('slow');
    }
    $('.toggle-why').on('click', function(evt){
      evt.preventDefault();
      $('#novanet-why-sign-in').toggle('fast');
    });
  });
</script>


<!-- temporarily re-adding things I had refactored into common.html -->

<!-- uri.js from http://medialize.github.io/URI.js/ or https://github.com/medialize/URI.js -->
<script type="text/javascript" src="/primo_library/libweb/uploaded_files/NOVANET_TEMPLATE/uri.js"></script>
<script type="text/javascript">
// <![CDATA[
// set up some novanet utilities
var novanet = novanet || {};
novanet.page = {};
novanet.page.hasSimpleSearch = function(){
  return $("#exlidSearchTile.EXLSearch").length > 0;
}
novanet.page.hasAdvancedSearch = function(){
  return $("#exlidAdvancedSearchTile.EXLAdvancedSearch").length > 0;  
}
novanet.page.hasBrowseSearch = function(){
  return $("#exlidAdvancedSearchRibbon.EXLAdvancedBrowseRibbon").length > 0;
}
novanet.page.isMyAccount = function(){
}

novanet.uri = new URI();
novanet.params = novanet.uri.search(true);
// ]]>
</script>

<script type="text/javascript">
// <![CDATA[
//All this does is change the favicon from the Ex Libris Rainbow Swirl to the Novanet icon.

novanet.params = new URI().search(true);
novanet.current_view = novanet.params.vid || 'NOVANET';
novanet.upload_folder = '/primo_library/libweb/uploaded_files/NOVANET_TEMPLATE'; //do not change this per-view -- files referenced here are all stored in NOVANET_TEMPLATE
novanet.$head = $('head');
novanet.headElements = [];  //an array of DOMElements we will add to the <head> node at the end of this script.

//remove Ex Libris apple-touch-icon
$("link[rel=apple-touch-icon]").remove();

//add our own favicon
novanet.headElements.push(
  $('<link>').attr({
    rel: 'shortcut icon',
    href: 'http://www.novanet.ns.ca/favicon.ico'
  }).get()
);


//add Novanet apple-touch-icons
$.each(['57', '114', '72', '144', '60', '120', '76', '152', '180'], function(idx, s){
  var szstring = s + 'x' + s;
  novanet.headElements.push(
    $('<link>').attr({
      rel:   'apple-touch-icon',
      sizes: szstring,
      href: novanet.upload_folder + '/apple-touch-icon-' + szstring + '.png'
    }).get()
  );  
});

//add .png favicons for those browsers that can take higher-res versions.
//the order of the sizes array is important, especially the first and last elements.
$.each(['192', '160', '96', '16', '32'], function(idx, s){
  var szstring = s + 'x' + s;
  novanet.headElements.push(
    $('<link>').attr({
      rel  : 'icon',
      sizes: szstring,
      href : novanet.upload_folder + '/favicon-' + szstring + '.png'
    }).get()
  );
});

//add some msapplication crap for "Pinned Sites"
var metas = [
{name: 'application-name', content: 'Novanet'},
{name: 'msapplication-TileColor', content: '#2d89ef'},
{name: 'msapplication-TileImage', content: novanet.upload_folder + '/mstile-144x144.png'},
{name: 'msapplication-starturl', content: '/primo_library/libweb/action/search.do?&vid=' + novanet.current_view},
{name: 'msapplication-tooltip', content: 'Search Novanet'},
{name: 'msapplication-task', content: 'name=New Search;action-uri=/primo_library/libweb/action/search.do?&vid=' + novanet.current_view + ';icon-uri=/link to magnifying glass'},
{name: 'msapplication-config', content: novanet.upload_folder + '/browserconfig.xml'}
];
$.each(metas, function(idx, attrs){
  novanet.headElements.push(
    $('<meta>').attr(attrs).get()
  );
});

//add all the new elements to the DOM:
novanet.$head.append(novanet.headElements);

// ]]>
</script>

<script>
//<![CDATA[
// add links / modify the search tile

$(function(){
  if (novanet.page.hasBrowseSearch()){    
    //add a link to Advanced Search and New Search.
      var container = $(".EXLSearchFieldRibbonFormLinks"),
          simple = container.find('a');
 
      if (simple.attr('href').indexOf('vid=') < 0){
        simple.attr('href', 'search.do?vid=' + (novanet.params.vid || ''));
      }
      
      if ($("#novanet-advanced-search-link").length < 1){
        container.append(
          $("<a>").attr({
            href: "search.do?mode=Advanced&ct=AdvancedSearch&vid=" + (novanet.params.vid || ''),
            id: "novanet-advanced-search-link"
          }).html("Advanced Search")
        );
      }
      
      if ($("#novanet-new-search-link").length < 1){
        container.append(
          $("<a>").attr({
            href: "search.do?fn=showBrowse&mode=BrowseSearch&vid=" + (novanet.params.vid || ''),
            id: "novanet-new-search-link"
          }).html("New Search")
        );
      }
  }
  else if (novanet.page.hasAdvancedSearch()){
    //add a link to Advanced Search and New Search.
      var container = $(".EXLSearchFieldRibbonFormLinks");
      
      if ($("#novanet-browse-search-link").length < 1){
        container.append(
          $("<a>").attr({
            href: "search.do?fn=showBrowse&mode=BrowseSearch&vid=" + (novanet.params.vid || ''),
            id: "novanet-browse-search-link"
          }).html("Browse")
        );
      }
      
      if ($("#novanet-new-search-link").length < 1){
        container.append(
          $("<a>").attr({
            href: "search.do?mode=Advanced&ct=AdvancedSearch&vid=" + (novanet.params.vid || ''),
            id: "novanet-new-search-link"
          }).html("New Search")
        );
      }
  }
  else if (novanet.page.hasSimpleSearch()){
    //add a link for a "New Search".
      if ($("#novanet-new-search-link").length < 1){
        $("<div>").addClass("EXLSearchFieldRibbonBrowseSearchLink").append(
          $("<a>").attr({
            href: "search.do?vid=" + (novanet.params.vid || ''),
            title: "New Search",
            id: "novanet-new-search-link"
            }
          ).addClass("EXLSearchFieldRibbonAdvancedTwoLinks").html("New Search")
        ).insertAfter(
          $(".EXLSearchFieldRibbonBrowseSearchLink")
        );
      }
  }
});

//]]>
</script>

